angular.module("durgaPuja.controllers").controller("OrderCtrl",function(t,e,o,a,n,l,r,u,c,s,i,d,p,f){t.doRefresh=function(){d.getUser("facebook");n.getOrderDetailsByUserId().then(function(e){t.orders=e,f.hide()},function(t){f.hide(),s.alert({title:t})})},f.show(),t.doRefresh()}),angular.module("durgaPuja.controllers").controller("ShopPujaCtrl",function(t,e,o,a,n,l,r,u,c,s,i,d,p){t.getAllPuja=function(){a.getPujaList().then(function(e){t.products=e,i.hide(),n.saveAllPuja(e)},function(t){i.hide(),c.alert({title:"Error",template:t})})},t.motionFab=function(t){for(var e="drop",o=!1,a=document.getElementById("puja_"+t),n=e instanceof Array?e:[e],l=0;l<n.length;l++)a.classList.toggle(n[l]),o=a.classList.contains(n[l]),o&&!function(t){d(function(){a.classList.toggle(t)},300)}(n[l])};t.saveVote=function(e){t.motionFab(e),d(function(){a.saveVote(e).then(function(t){"TRUE"===t.returnMessage?c.alert({title:"Vote Puja.",subTitle:"Success."}).then(function(t){$("#puja_"+e).prop("disabled",!0)}):c.alert({title:"Vote Puja.",subTitle:"Pls try again."})},function(t){console.log("error occured")})},400)},t.openContact=function(){i.show(),d(function(){a.saveOrder().then(function(t){i.hide(),"TRUE"===t.orderStatus?c.alert({title:"Order placed successfully.",cssClass:"contactPopup",subTitle:"<p>Please collect pass from the below address.</p><p>201, New Park Street, Radiant Park Apartment,</p><p>5th Floor, Block - 5h</p><p> Kolkata&nbsp;-&nbsp;700 017</p><p>Siticable: +91 8335836660 (10 a.m - 7 p.m)</p><p><strong>Profits from sale of Tickets will be donated to NGO - Snehalaya</strong></p>"}):c.alert({title:"Order could not be placed.",cssClass:"contactPopup",subTitle:"<p>Please try again</p>"})},function(t){console.log(t),i.hide(),c.alert({title:"Login Failed",template:t})})})},i.show(),t.getAllPuja()}),angular.module("durgaPuja.controllers").controller("ShopPujaDetailCtrl",function(t,e,o,a,n,l,r,u,c,s,i){t.cart=n.loadCart(),t.allPuja=n.loadAllPuja(),t.product=s("filter")(t.allPuja,{PujaID:e.productId})[0],t.product.Quantity=e.quantity,t.loadMap=function(){var e=new google.maps.LatLng(t.product.PujaLatitude,t.product.PujaLongitude),o={center:e,zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP};t.map=new google.maps.Map(document.getElementById("map"),o),google.maps.event.addListenerOnce(t.map,"idle",function(){var o=new google.maps.Marker({map:t.map,animation:google.maps.Animation.DROP,position:e}),a=new google.maps.InfoWindow({content:t.product.PujaName});google.maps.event.addListener(o,"click",function(){a.open(t.map,o)})})},i(t.loadMap);var d=function(e){t.cart.products.push(e),n.saveCart(t.cart)};t.addProduct=function(t){o.show({buttons:[{text:"<b>Add to cart</b>"}],titleText:"Buy Pass for "+t.PujaName,cancelText:"Cancel",cancel:function(){},buttonClicked:function(e){return 0!=e||(d(t),!0)}})}}),angular.module("durgaPuja.controllers").controller("VoteResultsCtrl",function(t,e,o,a,n,l,r,u,c,s,i,d,p,f){t.doRefresh=function(){n.getResults().then(function(e){t.results=e,f.hide()},function(t){f.hide(),s.alert({title:t})})},f.show(),t.doRefresh()});